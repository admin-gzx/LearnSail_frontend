# 在线教育平台前端架构设计
## 一、架构概述
基于项目文档，前端采用Vue 3技术栈构建单页应用(SPA)，采用组件化、模块化的设计思想，实现前后端分离的在线教育平台。整体架构分为表现层、应用层和通用服务层三个主要层次。

## 二、技术栈选择
- 框架 : Vue 3
- 构建工具 : Vite
- 状态管理 : Pinia
- UI组件库 : Element Plus
- 路由管理 : Vue Router
- 网络请求 : Axios
- 代码规范 : ESLint + Prettier
- CSS预处理器 : SCSS
## 三、架构层次设计
```
+---------------------------+    
+---------------------------+
|       表现层 
(UI)         |    |       应用层 
(SPA)        |
|  - Vue 3 组件             |    |  
- Vue Router 路由管理    |
|  - Element Plus UI组件库  |    |  
- Pinia 状态管理         |
|  - 自定义组件             |    |  
- Axios 网络请求         |
+---------------------------+    
+---------------------------+
            |                       
                  |
            v                       
                  v
+-----------------------------------
------------+
|              通用服务
层                       |
|  - 认证服务     - 日志服务     - 错误
处理     |
|  - 缓存服务     - 工具函数     - 权限
控制     |
+-----------------------------------
------------+
```
## 四、目录结构设计
```
/src
  /assets            # 静态资源
  /components        # 通用组件
    /base            # 基础组件
    /business        # 业务组件
  /views             # 页面组件
  /router            # 路由配置
  /store             # 状态管理
    /modules         # 模块状态
  /services          # API服务
  /utils             # 工具函数
  /hooks             # 自定义钩子
  /styles            # 全局样式
  /plugins           # 插件配置
  App.vue            # 根组件
  main.ts            # 入口文件
```
## 五、页面与路由设计
### 主要页面
- 首页 ：课程推荐、公告、统计数据
- 课程列表页 ：分类筛选、搜索、排序
- 课程详情页 ：课程介绍、章节列表、评价
- 学习页面 ：视频播放器、笔记、评论区
- 个人中心 ：学习记录、收藏课程、个人信息
- 教师后台 ：课程管理、作业管理、学生管理
- 管理员后台 ：用户管理、系统设置、数据统计
### 路由配置
```
// router/index.ts
export default createRouter({
  history: createWebHistory(import.
  meta.env.BASE_URL),
  routes: [
    { path: '/', name: 'home', 
    component: HomeView },
    { path: '/login', name: 
    'login', component: LoginView },
    { path: '/register', name: 
    'register', component: 
    RegisterView },
    { path: '/courses', name: 
    'courses', component: 
    CourseListView },
    { path: '/courses/:id', name: 
    'courseDetail', component: 
    CourseDetailView },
    { path: '/learn/:courseId/
    :lessonId', name: 'learning', 
    component: LearningView },
    { path: '/profile', name: 
    'profile', component: 
    ProfileView, meta: { 
    requiresAuth: true } },
    { path: '/teacher', name: 
    'teacherDashboard', component: 
    TeacherDashboardView, meta: { 
    requiresAuth: true, role: 
    'teacher' } },
    { path: '/admin', name: 
    'adminDashboard', component: 
    AdminDashboardView, meta: { 
    requiresAuth: true, role: 
    'admin' } },
    { path: '/:pathMatch(.*)*', 
    name: 'notFound', component: 
    NotFoundView }
  ]
})
```
## 六、状态管理设计
使用Pinia进行状态管理，按模块划分状态：

```
// store/modules/user.ts
export const useUserStore = 
defineStore('user', {
  state: () => ({
    userInfo: null,
    token: '',
    isAuthenticated: false
  }),
  getters: {
    getUserInfo: (state) => state.
    userInfo,
    getToken: (state) => state.
    token,
    isLoggedIn: (state) => state.
    isAuthenticated
  },
  actions: {
    setUserInfo(info) {
      this.userInfo = info;
      this.isAuthenticated = true;
    },
    setToken(token) {
      this.token = token;
      localStorage.setItem('token', 
      token);
    },
    logout() {
      this.userInfo = null;
      this.token = '';
      this.isAuthenticated = false;
      localStorage.removeItem
      ('token');
    }
  }
})
```
## 七、API服务设计
```
// services/api.ts
import axios from 'axios';
import { useUserStore } from '@/
store/modules/user';

const API_URL = import.meta.env.
VITE_API_URL || 'http://
localhost:8000/api/v1';

const api = axios.create({
  baseURL: API_URL,
  headers: {
    'Content-Type': 'application/
    json'
  }
});

// 请求拦截器
api.interceptors.request.use(
  (config) => {
    const userStore = useUserStore
    ();
    if (userStore.getToken) {
      config.headers.Authorization 
      = `Bearer ${userStore.
      getToken}`;
    }
    return config;
  },
  (error) => {
    return Promise.reject(error);
  }
);

// 响应拦截器
api.interceptors.response.use(
  (response) => response,
  (error) => {
    if (error.response && error.
    response.status === 401) {
      const userStore = useUserStore
      ();
      userStore.logout();
      window.location.href = '/
      login';
    }
    return Promise.reject(error);
  }
);

export default api;
```
## 八、组件设计规范
### 基础组件
- 遵循单一职责原则
- 提供清晰的Props接口
- 支持自定义事件
- 可复用性优先
### 业务组件
- 封装特定业务逻辑
- 调用API服务
- 使用Pinia状态管理
- 组合基础组件实现复杂功能
### 示例组件
```
<script setup lang="ts">
import { ref, computed } from 'vue';
import { ElButton, ElInput } from 
'element-plus';
import api from '@/services/api';

// 定义组件props
defineProps({
  courseId: {
    type: Number,
    required: true
  }
});

// 定义组件 emits
defineEmits(['enrollSuccess']);

// 组件状态
const isLoading = ref(false);
const errorMessage = ref('');

// 组件方法
const handleEnroll = async () => {
  isLoading.value = true;
  errorMessage.value = '';
  try {
    await api.post(`/courses/$
    {props.courseId}/enroll`);
    emit('enrollSuccess');
  } catch (error) {
    errorMessage.value = '报名失败，
    请稍后重试';
    console.error('Enroll error:', 
    error);
  } finally {
    isLoading.value = false;
  }
};
</script>

<template>
  <div class="enroll-section">
    <ElButton
      type="primary"
      :loading="isLoading"
      @click="handleEnroll"
      :disabled="isLoading"
    >
      立即报名
    </ElButton>
    <p v-if="errorMessage" 
    class="error-message">{{ 
    errorMessage }}</p>
  </div>
</template>

<style scoped lang="scss">
.enroll-section {
  margin-top: 20px;
  .error-message {
    color: #f53f3f;
    margin-top: 10px;
  }
}
</style>
```
## 九、用户体验设计
### 颜色方案
- 主色调 : 蓝色 (#165DFF) - 代表知识、专业和信任
- 辅助色 : 绿色 (#00B42A) - 用于成功状态和积极反馈
- 警告色 : 橙色 (#FF7D00) - 用于警告和提示
- 错误色 : 红色 (#F53F3F) - 用于错误状态
- 中性色 : 深灰 (#1D2129)、中灰 (#4E5969)、浅灰 (#C9CDD4)、超浅灰 (#F2F3F5)
### 排版规范
- 标题字体 : Inter, sans-serif
- 正文字体 : Roboto, sans-serif
- 标题层级 :
  - H1: 24px, 字重700
  - H2: 20px, 字重600
  - H3: 18px, 字重600
  - H4: 16px, 字重600
- 正文 : 14px, 字重400, 行高1.5
- 小文本 : 12px, 字重400
### 响应式设计
- 移动端 (<768px): 单列布局，简化导航为汉堡菜单
- 平板 (768px-1024px): 双列布局，保留核心功能
- 桌面端 (>1024px): 多列布局，完整功能展示
- 关键断点 : 360px, 768px, 1024px, 1440px
## 十、开发与构建流程
1. 1.
   本地开发 : npm run dev - 启动Vite开发服务器
2. 2.
   代码检查 : npm run lint - 使用ESLint检查代码
3. 3.
   代码格式化 : npm run format - 使用Prettier格式化代码
4. 4.
   构建 : npm run build - 构建生产环境代码
5. 5.
   预览 : npm run preview - 预览构建后的代码
## 十一、部署架构
前端应用部署在Nginx服务器上，通过反向代理与后端API通信。静态资源通过CDN加速，提高加载性能。

```
+----------------+    
+----------------+    
+----------------+
|  Nginx 反向代理|<-->|  前端应用 
(Vue) |    |  Redis 缓存    |
+----------------+    
+----------------+    
+----------------+
        |                         | 
                            |
        v                         
        v                     v
+----------------+    
+----------------+    
+----------------+
|  Django API服务|<-->|  MySQL 数据
库   |<-->|  MinIO 存储服务|
+----------------+    
+----------------+    
+----------------+
```
本前端架构设计基于项目文档中的技术栈和需